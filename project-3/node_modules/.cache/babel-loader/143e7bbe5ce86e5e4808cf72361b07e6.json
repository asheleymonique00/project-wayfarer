{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AMH3146\\\\CFG\\\\week9\\\\project-3\\\\main-project-3\\\\project-wayfarer\\\\project-3\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Route, Link, withRouter } from 'react-router-dom';\nimport Modal from 'react-modal';\nimport SignUp from './Components/SignUp';\nimport Login from './Components/Login';\nimport Profile from './Components/Profile';\nimport { signUpUser, loginUser, verifyUser, getProfile } from './Service/api_helper';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSignUp = async (e, user) => {\n      e.preventDefault();\n      const loadedUser = await signUpUser(user);\n      const userProfile = await getProfile(user);\n      console.log(loadedUser);\n      this.setState({\n        currentUser: loadedUser,\n        userProfile: userProfile\n      });\n      this.props.history.push(`/profile`);\n    };\n\n    this.handleLogin = async (e, user) => {\n      e.preventDefault();\n      const loadedUser = await loginUser(user);\n      const userProfile = await getProfile(user);\n      this.setState({\n        currentUser: loadedUser,\n        userProfile: userProfile\n      });\n      this.props.history.push(`/profile`);\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        currentUser: null\n      });\n      localStorage.removeItem('authToken');\n      this.props.history.push(`/`);\n    };\n\n    this.setModalTrue = () => {\n      this.setState({\n        modal: true\n      });\n    };\n\n    this.setModalFalse = () => {\n      this.setState({\n        modal: false\n      });\n    };\n\n    this.state = {\n      currentUser: null,\n      modal: false,\n      userProfile: null\n    };\n  }\n\n  async componentDidMount() {\n    const currentUser = await verifyUser();\n\n    if (currentUser) {\n      this.setState({\n        currentUser: currentUser\n      });\n    }\n  }\n\n  //Create modao for signup and login pop up\n  render() {\n    Modal.setAppElement('#root');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, \"Wayfarer\"), this.state.currentUser ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 35\n      }\n    }, \"Logout\") : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.setModalTrue(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, \"New User\"), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.modal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }, \"Welcome to Wayfarer - Please enter a new username and password\"), /*#__PURE__*/React.createElement(SignUp, {\n      handleSubmit: this.handleSignUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.setModalFalse(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, \" Close\")), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.setModalTrue(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, \"LogIn\"), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.modal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, \"Welcome back to Wayfarer - Please enter your username and password\"), /*#__PURE__*/React.createElement(Login, {\n      handleSubmit: this.handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.setModalFalse(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, \" Close\")))), /*#__PURE__*/React.createElement(\"main\", {\n      className: \"App-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, this.state.userProfile && /*#__PURE__*/React.createElement(Link, {\n      to: \"/profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 36\n      }\n    }, \"Profile Page\"), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      render: () => {\n        return /*#__PURE__*/React.createElement(Profile, {\n          userProfile: this.state.userProfile,\n          editable: this.state.editable,\n          toggleEditProfile: this.toggleEditProfile,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["C:/Users/AMH3146/CFG/week9/project-3/main-project-3/project-wayfarer/project-3/src/App.js"],"names":["React","Component","Route","Link","withRouter","Modal","SignUp","Login","Profile","signUpUser","loginUser","verifyUser","getProfile","App","constructor","props","handleSignUp","e","user","preventDefault","loadedUser","userProfile","console","log","setState","currentUser","history","push","handleLogin","handleLogout","localStorage","removeItem","setModalTrue","modal","setModalFalse","state","componentDidMount","render","setAppElement","editable","toggleEditProfile"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\nimport { Route, Link, withRouter } from 'react-router-dom';\r\nimport Modal from 'react-modal';\r\n\r\nimport SignUp from './Components/SignUp';\r\nimport Login from './Components/Login';\r\nimport Profile from './Components/Profile';\r\n\r\nimport { signUpUser, loginUser, verifyUser, getProfile } from './Service/api_helper';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      currentUser: null,\r\n      modal: false,\r\n      userProfile: null\r\n    }\r\n  }\r\n\r\n  handleSignUp = async (e, user) => {\r\n    e.preventDefault();    \r\n    const loadedUser = await signUpUser(user)\r\n    const userProfile = await getProfile(user);\r\n    console.log(loadedUser);\r\n    this.setState({\r\n      currentUser: loadedUser,\r\n      userProfile: userProfile\r\n      \r\n    })\r\n    this.props.history.push(`/profile`);\r\n    \r\n  }\r\n\r\n  async componentDidMount() {\r\n    const currentUser = await verifyUser();\r\n    if (currentUser) {\r\n      this.setState({\r\n        currentUser: currentUser\r\n      })\r\n    }\r\n  }\r\n\r\n  handleLogin = async (e, user) => {\r\n    e.preventDefault();\r\n    const loadedUser = await loginUser(user);\r\n    const userProfile = await getProfile(user);\r\n    this.setState({\r\n      currentUser: loadedUser, \r\n      userProfile: userProfile\r\n    })\r\n    this.props.history.push(`/profile`);\r\n  }\r\n\r\n  handleLogout = () => {\r\n    this.setState({\r\n        currentUser: null\r\n    })\r\n    localStorage.removeItem('authToken');\r\n    this.props.history.push(`/`);\r\n}\r\n\r\nsetModalTrue = () => {\r\n  this.setState({\r\n    modal: true\r\n  })\r\n}\r\n\r\nsetModalFalse = () => {\r\n  this.setState({\r\n    modal: false\r\n  })\r\n}\r\n\r\n//Create modao for signup and login pop up\r\n  render() {\r\n    Modal.setAppElement('#root')\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h2>Wayfarer</h2>\r\n        {this.state.currentUser ? <button onClick={this.handleLogout}>Logout</button> : (\r\n          <div>  \r\n          {/* Wrap signup/login in modals and apply buttons to open close */}\r\n          <button onClick={() => this.setModalTrue()}>New User</button>\r\n            <Modal isOpen={this.state.modal}>\r\n              <h2>Welcome to Wayfarer - Please enter a new username and password</h2>\r\n              <SignUp handleSubmit={this.handleSignUp} />\r\n              <button onClick={() =>this.setModalFalse()}> Close</button>\r\n            </Modal>\r\n          <button onClick={() => this.setModalTrue()}>LogIn</button>\r\n            <Modal isOpen={this.state.modal}>\r\n            <h2>Welcome back to Wayfarer - Please enter your username and password</h2>\r\n              <Login handleSubmit={this.handleLogin}/>\r\n              <button onClick={() =>this.setModalFalse()}> Close</button>\r\n            </Modal>\r\n        </div>\r\n      )}\r\n      </header>\r\n      <main className=\"App-main\">\r\n        {this.state.userProfile && <Link to=\"/profile\">Profile Page</Link>}\r\n        <Route path=\"/profile\" render={() => {\r\n         return <Profile userProfile={this.state.userProfile} \r\n         editable={this.state.editable}\r\n         toggleEditProfile={this.toggleEditProfile}/>\r\n        }} />     \r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default withRouter(App);\r\n"]},"metadata":{},"sourceType":"module"}